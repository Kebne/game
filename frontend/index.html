<!DOCTYPE html>
<html>
<head>
    <title>The game</title>
    <meta charset="UTF-8">
    <meta lang="se-SV">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Comic+Neue&display=swap" rel="stylesheet">
    <link href="main.css" rel="stylesheet">
</head>

<body>
  <main>
    <div class="game">
      <div class="game-countdown"></div>
      <div class="game-correct-answer"></div>
      <div class="game-choice"></div>
     
    </div>
    <div class="game-questions"></div>

    <section style="background-color: #999; padding: var(--standard-padding)">
      <style>
        .player-input {
      display: flex;
      box-sizing: border-box;
      gap: 0.4rem;
    }
      button {
        box-sizing: border-box;
        font-style: normal;
        font-family: 'Comic Neue', sans-serif;
        font-size: 14px;
        padding: 1rem;
        color: #eee;
        background-color: #333;
        border: 1px solid #444;
        border-radius: 4px;
      }
      button:hover {
        cursor: pointer;
        filter: brightness(150%);
      }
      .player-status {
          display: flex;
          box-sizing: border-box;
          gap: 0.4rem;
          margin-bottom: 1rem;
      }
      .player-marks {
        margin-bottom: 1rem;
      }
      .game-slider {
        margin-bottom: 0.5rem;
      }
      </style>
      <div class="game-round"></div>
      <div class="player-status"></div>
      <div class="player-marks">Dina marker</div>
    
      <div class="player-input-wrapper">
        <div class="game-slider">
          <input type="range" min="10" max="100" value="10" step="10" class="bet-slider">
          <output class="bet-slider-output"></output>
          <script>
            const slider = document.querySelector('.bet-slider');
            const output = document.querySelector('.bet-slider-output');
            output.innerHTML = slider.value;
            slider.addEventListener('change', sliderOutput);
            function sliderOutput() {
              
              output.innerHTML = slider.value;
            };
           
          </script>
        </div>

      <div class="player-input">  
        <div><button onclick="betta()">Betta</button></div>
        <div><button onclick="pass()">Passa</button></div>
        <div><button onclick="fold()">Lägga sig</button></div>
      </div>

    </div>

    </section>

    <section>
      <div class="game-descript" style="background-color: #444; padding: var(--standard-padding); line-height: 1.7; margin-top: 6rem; font-weight: 700">
        <ul>
          <li style="color: #DCF7F3">- Countdown-timer. Css-class: .game-countdown.</li>
          <li style="color: #FFFCDD">- Correct answer. Css-class: .game-correct-answer.</li>
          <li style="color: #FFD8D8">- Player choice, Css-class: .game-choice.</li>
          <li style="color: #e3ffdd">- Questions. Css-class: .game-questions.</li>
        </ul>
      </div>
    </section>

    <section data-id="game-board" style="display: none">
      <div class="grid-table">
        <div class="player1">A</div>
        <div class="player2">B</div>
        <div class="player3">C</div>
        <div class="player4">D</div>
        <div class="table">Board</div>
      </div>
    </section>

  </main>
</body>
<script>
// Players input //

var player = {
    marks: 1000,
    pass: false,
    fold: false,
  }

  var statusOutput = `Passat är: <i>${player.pass}</i>. Lagt är: <i>${player.fold}</i>.`
  
  let playerMarks = document.querySelector('.player-marks');
  playerMarks.innerHTML = `Du har ${player.marks} marker`;

  let playerStatus = document.querySelector('.player-status');
  playerStatus.innerHTML = `Passat är: <i>${player.pass}</i>. Lagt är: <i>${player.fold}</i>.`;

  function betta() {
    const slider = document.querySelector('.bet-slider');
    let betSum = slider.value;
    player.marks = player.marks - betSum;
    let playerMarks = document.querySelector('.player-marks');
    playerMarks.innerHTML = `Du har ${player.marks} marker`;
  };

  function pass() {
    player.pass = true;
    let playerStatus = document.querySelector('.player-status');
    playerStatus.innerHTML = `Passat är: <i>${player.pass}</i>. Lagt är: <i>${player.fold}</i>.`;
  };

  function fold() {
    player.fold = true;
    let playerStatus = document.querySelector('.player-status');
    playerStatus.innerHTML = `Passat är: <i>${player.pass}</i>. Lagt är: <i>${player.fold}</i>.`;
  };

  function gameRoundNr() {
    let gameRoundNrOutput = document.querySelector('.game-round');
    let gameRoundNr = 1;
    gameRoundNrOutput.innerHTML = `Runda ${gameRoundNr}`
  };
  gameRoundNr();

</script>

<script type="module">
  
  
  import {questions} from './modules/questions.js';
  import {createQuestionForm} from './modules/template.js';
  import {countDown} from './modules/countdown.js';
  import {playerChoice} from './modules/playerchoice.js';
  import {players} from './modules/players.js';
  const gamePlayers = players;
  
  window.onload = gameEngine();
    
  function gameEngine(currentRound = 1, questionNumber = 1) {
    console.log(`currentRound ${currentRound}, currentQuestion ${questionNumber}`);
    let currentQuestion = questions[`question${questionNumber}`];
    createQuestionForm(currentQuestion);
    countDown(4, currentQuestion);
    /*playerChoice(currentQuestion);
    const testar = playerChoice(currentQuestion);
    console.log('test i Index:', testar);*/

    let form = document.forms[0];
    let radios = form.elements['questions'];
    form.addEventListener('change', function() {playerChoice(radios)});
    

  };



  
</script>

</html>
